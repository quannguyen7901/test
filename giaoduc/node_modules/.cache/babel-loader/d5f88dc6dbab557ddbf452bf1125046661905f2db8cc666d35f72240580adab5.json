{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content__footer\"\n};\nconst _hoisted_2 = {\n  class: \"content__footer--left\"\n};\nconst _hoisted_3 = {\n  class: \"content__footer--right\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-light fa-angle-left\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-light fa-angle-right\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_7 = [_hoisted_6];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MisaLoading = _resolveComponent(\"MisaLoading\");\n  const _component_MisaTableHead = _resolveComponent(\"MisaTableHead\");\n  const _component_MisaTableBody = _resolveComponent(\"MisaTableBody\");\n  const _component_MisaListbox = _resolveComponent(\"MisaListbox\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", {\n    class: \"table__cover\",\n    onScroll: _cache[0] || (_cache[0] = (...args) => $options.scrollFunction && $options.scrollFunction(...args)),\n    ref: \"table\"\n  }, [$data.isloading ? (_openBlock(), _createBlock(_component_MisaLoading, {\n    key: 0\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"table\", null, [_createVNode(_component_MisaTableHead, {\n    datas: $data.tabletitle\n  }, null, 8 /* PROPS */, [\"datas\"]), $data.hasdata ? (_openBlock(), _createBlock(_component_MisaTableBody, {\n    key: 0,\n    tablekey: \"EmulatitleId\",\n    colum: $data.colum,\n    onShowPopup: $options.showPopup,\n    datas: $data.emulations,\n    scroll: $data.numscroll\n  }, null, 8 /* PROPS */, [\"colum\", \"onShowPopup\", \"datas\", \"scroll\"])) : _createCommentVNode(\"v-if\", true)])], 544 /* HYDRATE_EVENTS, NEED_PATCH */), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createTextVNode(_toDisplayString(_ctx.$resource.VN.TextNormal.Count) + \" \", 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString($options.format1(_ctx.num)), 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(_ctx.$resource.VN.TextNormal.Record), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [_createTextVNode(_toDisplayString(_ctx.$resource.VN.TextNormal.CountRecord) + \" \", 1 /* TEXT */), _createVNode(_component_MisaListbox, {\n    class: \"numberpage\",\n    modelValue: $data.pagesize,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.pagesize = $event),\n    datas: $data.numberpage\n  }, null, 8 /* PROPS */, [\"modelValue\", \"datas\"]), _createElementVNode(\"div\", null, [_createElementVNode(\"span\", null, _toDisplayString($data.start) + \" - \" + _toDisplayString($data.end), 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(_ctx.$resource.VN.TextNormal.Record), 1 /* TEXT */)]), _createElementVNode(\"div\", {\n    class: \"icon icon--24\",\n    ref: \"pre\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.prePage && $options.prePage(...args))\n  }, _hoisted_5, 512 /* NEED_PATCH */), _createElementVNode(\"div\", {\n    class: \"icon icon--24\",\n    ref: \"next\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.nextPage && $options.nextPage(...args))\n  }, _hoisted_7, 512 /* NEED_PATCH */)])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_4","_hoisted_6","onScroll","_cache","args","$options","scrollFunction","ref","$data","isloading","_createBlock","_component_MisaLoading","key","_createVNode","_component_MisaTableHead","datas","tabletitle","hasdata","_component_MisaTableBody","tablekey","colum","onShowPopup","showPopup","emulations","scroll","numscroll","_hoisted_1","_hoisted_2","_ctx","$resource","VN","TextNormal","Count","_toDisplayString","format1","num","Record","_hoisted_3","CountRecord","_component_MisaListbox","pagesize","$event","numberpage","start","end","onClick","prePage","nextPage"],"sources":["D:\\Code\\Misa\\vue Web_3\\giaoduc\\src\\views\\emulationtitle\\EmulationTitleTable.vue"],"sourcesContent":["<template>\r\n    <div class=\"table__cover\" @scroll=\"scrollFunction\" ref=\"table\">\r\n        <MisaLoading v-if=\"isloading\"></MisaLoading>\r\n        <table>\r\n            <MisaTableHead :datas=\"tabletitle\"></MisaTableHead>\r\n            <MisaTableBody v-if=\"hasdata\" tablekey=\"EmulatitleId\" :colum=\"colum\" @showPopup=\"showPopup\" :datas=\"emulations\"\r\n                :scroll=\"numscroll\">\r\n            </MisaTableBody>\r\n        </table>\r\n    </div>\r\n    <div class=\"content__footer\">\r\n        <div class=\"content__footer--left\">\r\n            {{ $resource.VN.TextNormal.Count }} <span>{{ format1(num) }}</span> {{ $resource.VN.TextNormal.Record }}\r\n        </div>\r\n        <div class=\"content__footer--right\">\r\n            {{ $resource.VN.TextNormal.CountRecord }}\r\n            <MisaListbox class=\"numberpage\" v-model=\"pagesize\" :datas=\"numberpage\"></MisaListbox>\r\n            <div><span> {{ start }} - {{ end }}</span> {{ $resource.VN.TextNormal.Record }} </div>\r\n            <div class=\"icon icon--24\" ref=\"pre\" @click=\"prePage\"><i class=\"fa-light fa-angle-left\"></i></div>\r\n            <div class=\"icon icon--24\" ref=\"next\" @click=\"nextPage\"><i class=\"fa-light fa-angle-right\"></i></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport MisaTableHead from '@/components/MisaTable.vue/MisaTableHead.vue';\r\nimport MisaTableBody from '@/components/MisaTable.vue/MisaTableBody.vue';\r\nimport MisaLoading from '@/components/MisaLoading.vue';\r\n\r\nexport default {\r\n    name: \"EmulationTitleTable\",\r\n    data() {\r\n        return {\r\n            numscroll: 0,\r\n            isloading: false,\r\n            tabletitle: this.$resource.VN.TextTable.Emulation,\r\n            colum: this.$resource.VN.TextColum.Emulation,\r\n            emulations: [],\r\n            pageindex: 1,\r\n            pagesize: 20,\r\n            baseapi: this.$baseapi,\r\n            hasdata: false,\r\n            numberpage: [10, 20, 50, 100],\r\n            start: 1,\r\n            end: 0,\r\n        }\r\n    },\r\n    components: {\r\n        MisaTableBody, MisaTableHead, MisaLoading\r\n    },\r\n    created() {\r\n        //Hứng các sự kiện từ bên ngoài\r\n        this.$tnemtter.on(\"search\", this.search)\r\n        this.$tnemtter.on(\"setStatusItem\", this.setStatusItem)\r\n        this.$tnemtter.on(\"reload\", this.loadData)\r\n        this.loadData()\r\n        //Api lấy tổng số bản ghi\r\n        this.$axios.get(`${this.baseapi}Emulatitles/Counts`)\r\n            //Api chạy OK\r\n            .then(async (res) => {\r\n                this.num = await res.data\r\n            })\r\n            //Api chạy không OK\r\n            .catch(async(res)=>{\r\n                console.log(res)\r\n            })\r\n    },\r\n    mounted() {\r\n        //Ẩn nút trở về trang trước\r\n        this.$refs.pre.classList.add(\"disable__div\")\r\n        \r\n        if (this.num < this.pagesize) {\r\n            this.$refs.next.classList.add(\"disable__div\")\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        //Bỏ hứng các sự kiện bên ngoài\r\n        this.$tnemtter.off(\"search\")\r\n        this.$tnemtter.off(\"reload\")\r\n        this.$tnemtter.off(\"setStatusItem\")\r\n    },\r\n    methods: {\r\n        /**\r\n         * Xang trang tiếp theo\r\n         * auther: NgQuan\r\n         * created:05/2023\r\n         */\r\n        nextPage() {\r\n            //Nếu số trang chưa max\r\n            if (this.end != this.num) {\r\n                //Số trang +1\r\n                this.pageindex += 1\r\n                //Nếu số trang sau khi cộng là max\r\n                if ((this.pageindex) * this.pagesize > this.num) {\r\n                    //Cập nhật số bản ghi\r\n                    this.start = ((this.pageindex - 1) * this.pagesize) + 1\r\n                    this.end = this.num\r\n                    //Ẩn nút xang trang tiếp theo\r\n                    this.$refs.next.classList.add(\"disable__div\")\r\n                }\r\n                //Nếu số trang sau khi cộng chưa max\r\n                else {\r\n                    //Cập nhật số bản ghi\r\n                    this.start = ((this.pageindex - 1) * this.pagesize) + 1\r\n                    this.end = this.pageindex * this.pagesize\r\n                }\r\n                //Hiện nút về trang trước đó\r\n                this.$refs.pre.classList.remove(\"disable__div\")\r\n                //Load dữ liệu của trang\r\n                this.loadData()\r\n            }\r\n        },\r\n        /**\r\n         * Trở về trang trước đó\r\n         * auther: NgQuan\r\n         * created: 05/2023\r\n         */\r\n        prePage() {\r\n            //Nêu số trang chưa min\r\n            if (this.end != this.pagesize) {\r\n                //Số trang -1\r\n                this.pageindex -= 1\r\n                //Nếu số trang sau khi trừ là min\r\n                if ((this.pageindex) * this.pagesize == this.pagesize) {\r\n                    //Cập nhật số bản ghi\r\n                    this.start = ((this.pageindex - 1) * this.pagesize) + 1\r\n                    this.end = (this.pageindex) * this.pagesize\r\n                    //Ẩn nút về trang trước đó\r\n                    this.$refs.pre.classList.add(\"disable__div\")\r\n                }\r\n                //Nếu số trang sau khi trừ chưa min\r\n                else {\r\n                    //Cập nhật số bản ghi\r\n                    this.start = ((this.pageindex - 1) * this.pagesize) + 1\r\n                    this.end = this.pageindex * this.pagesize\r\n                }\r\n                //Hiện nút xang trang tiếp\r\n                this.$refs.next.classList.remove(\"disable__div\")\r\n                //Load dữ liệu của trang\r\n                this.loadData()\r\n            }\r\n        },\r\n        /**\r\n         * đổi trạng thái bản ghi\r\n         * @param {id bản ghi} id \r\n         * @param {trạng thái bản ghi muốn đổi} status\r\n         * auther: NgQuan\r\n         * created: 05/2023 \r\n         */\r\n        setStatusItem(id, status) {\r\n            //Api sửa trạng thái\r\n            this.$axios.put(`${this.baseapi}Emulatitles/${id}/Status?status=${status}`)\r\n            //Nếu Api chạy OK\r\n                .then(() => {\r\n                    //Load dữ liệu trang\r\n                    this.loadData()\r\n                    //Hiện thông báo\r\n                    this.$tnemtter.emit(\"Noti\", this.$resource.VN.Notification.Sucsess, this.$resource.VN.SucsessText.SucsessInsert)\r\n                })\r\n                //Nếu Api chạy ko OK\r\n                .catch((res) => {\r\n                    //Load dữ liệu trang\r\n                    this.loadData()\r\n                    //Hiện thông báo\r\n                    this.$tnemtter.emit(\"Noti\", this.$resource.VN.Notification.Error, res.response.data.Message)\r\n                })\r\n        },\r\n        /**\r\n         * Format số nguyên\r\n         * @param {một số nguyên} n \r\n         * auther: NgQuan\r\n         * created: 05/2023\r\n         */\r\n        format1(n) {\r\n            //Nếu biến truyền vào là kiểu số\r\n            if (typeof (n) == 'number') {\r\n                //format biến truyền vào\r\n                return n.toFixed(0).replace(/./g, function (c, i, a) {\r\n                    return i > 0 && c !== \".\" && (a.length - i) % 3 === 0 ? \",\" + c : c\r\n                })\r\n            }\r\n            //Nếu biến truyền vào là kiểu khác số\r\n            else {\r\n                //trả về -1\r\n                return -1\r\n            }\r\n        },\r\n        /**\r\n        * Load data\r\n        * Auther: Nguyễn Quân\r\n        * Created:05/2023 \r\n        */\r\n        loadData() {\r\n            this.isloading = true\r\n            this.hasdata = false\r\n            //Api lấy bản ghi\r\n            this.$axios.get(`${this.baseapi}Emulatitles?pageIndex=${this.pageindex}&pageSize=${this.pagesize}`)\r\n                //Api chạy OK\r\n                .then(async (res) => {\r\n                    this.emulations = await res.data\r\n                    this.isloading = false\r\n                    this.hasdata = true\r\n                })\r\n                //Api chạy ko OK\r\n                .catch(async(res)=>{\r\n                    console.log(await res)\r\n                    this.$tnemtter.emit(\"Noti\", this.$resource.VN.Notification.Error, res.response.data.Message)\r\n                })\r\n        },\r\n        /**\r\n         * Tìm kiếm bản ghi\r\n         * @param {Ký tự tìm kiếm} i\r\n         * auther: NgQuan\r\n         * created: 05/2023 \r\n         */\r\n        search(i) {\r\n            this.isloading = true\r\n            this.hasdata = false\r\n            //Api tìm kiếm bản ghi\r\n            this.$axios.get(`${this.baseapi}Emulatitles?pageIndex=1&pageSize=${this.pagesize}&search=${i}`)\r\n                //Api chạy OK\r\n                .then(async (res) => {\r\n                    this.emulations = await res.data\r\n                    this.isloading = false\r\n                    this.hasdata = true\r\n                    this.num = res.data.length\r\n                })\r\n                //Api chạy ko OK\r\n                .catch(async( res)=>{\r\n                    console.log(await res)\r\n                })\r\n        },\r\n        /**\r\n        * Dịch chuyển function của bảng\r\n        * Auther: Nguyễn Quân\r\n        * Created:05/2023 \r\n        */\r\n        scrollFunction() {\r\n            this.numscroll = this.$refs.table.scrollLeft\r\n        },\r\n        /**\r\n        * Hiện popup\r\n        * Auther: Nguyễn Quân\r\n        * Created:05/2023 \r\n        */\r\n        showPopup(id) {\r\n            this.$router.push(`/emulatitle/${id}`)\r\n        }\r\n    },\r\n    watch: {\r\n        //Quan sát sự thay đổi của pagesize\r\n        pagesize(newvalue) {\r\n            //Ẩn nút trở về trang trước\r\n            this.$refs.pre.classList.add(\"disable__div\")\r\n            //reset số trang\r\n            this.pageindex = 1\r\n            //Load dữ liệu của trang\r\n            this.loadData()\r\n            this.start = 1\r\n            //Nếu pagesize lớn hơn tổng số bản ghi\r\n            if(Number(newvalue)>this.num){\r\n                //Cập nhật số bản ghi\r\n                this.end=this.num\r\n                //Ẩn nút xang trang tiếp\r\n                this.$refs.next.classList.add(\"disable__div\")\r\n            }\r\n            //Nếu pagesize nhỏ hơn tổng số bản ghi\r\n            else{\r\n                //Cập nhật số bản ghi\r\n                this.end = this.format1(Number(newvalue))\r\n                //Hiện nút xang trang tiếp\r\n                this.$refs.next.classList.remove(\"disable__div\")\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.disable__div {\r\n    color: #cfcfcf;\r\n    cursor: not-allowed;\r\n}\r\n</style>"],"mappings":";;EAUSA,KAAK,EAAC;AAAiB;;EACnBA,KAAK,EAAC;AAAuB;;EAG7BA,KAAK,EAAC;AAAwB;gCAIuBC,mBAAA,CAAsC;EAAnCD,KAAK,EAAC;AAAwB;oBAAjCE,UAAsC,C;gCACpCD,mBAAA,CAAuC;EAApCD,KAAK,EAAC;AAAyB;oBAAlCG,UAAuC,C;;;;;;6DAlBvGF,mBAAA,CAQM;IARDD,KAAK,EAAC,cAAc;IAAEI,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IAAEG,GAAG,EAAC;MAChCC,KAAA,CAAAC,SAAS,I,cAA5BC,YAAA,CAA4CC,sBAAA;IAAAC,GAAA;EAAA,M,mCAC5Cb,mBAAA,CAKQ,gBAJJc,YAAA,CAAmDC,wBAAA;IAAnCC,KAAK,EAAEP,KAAA,CAAAQ;EAAU,oCACZR,KAAA,CAAAS,OAAO,I,cAA5BP,YAAA,CAEgBQ,wBAAA;;IAFcC,QAAQ,EAAC,cAAc;IAAEC,KAAK,EAAEZ,KAAA,CAAAY,KAAK;IAAGC,WAAS,EAAEhB,QAAA,CAAAiB,SAAS;IAAGP,KAAK,EAAEP,KAAA,CAAAe,UAAU;IACzGC,MAAM,EAAEhB,KAAA,CAAAiB;uJAIrB1B,mBAAA,CAWM,OAXN2B,UAWM,GAVF3B,mBAAA,CAEM,OAFN4B,UAEM,G,kCADCC,IAAA,CAAAC,SAAS,CAACC,EAAE,CAACC,UAAU,CAACC,KAAK,IAAG,GAAC,iBAAAjC,mBAAA,CAA+B,cAAAkC,gBAAA,CAAtB5B,QAAA,CAAA6B,OAAO,CAACN,IAAA,CAAAO,GAAG,mB,iBAAW,GAAC,GAAAF,gBAAA,CAAGL,IAAA,CAAAC,SAAS,CAACC,EAAE,CAACC,UAAU,CAACK,MAAM,iB,GAEzGrC,mBAAA,CAMM,OANNsC,UAMM,G,kCALCT,IAAA,CAAAC,SAAS,CAACC,EAAE,CAACC,UAAU,CAACO,WAAW,IAAG,GACzC,iBAAAzB,YAAA,CAAqF0B,sBAAA;IAAxEzC,KAAK,EAAC,YAAY;gBAAUU,KAAA,CAAAgC,QAAQ;+DAARhC,KAAA,CAAAgC,QAAQ,GAAAC,MAAA;IAAG1B,KAAK,EAAEP,KAAA,CAAAkC;oDAC3D3C,mBAAA,CAAsF,cAAjFA,mBAAA,CAAqC,cAAAkC,gBAAA,CAA3BzB,KAAA,CAAAmC,KAAK,IAAG,KAAG,GAAAV,gBAAA,CAAGzB,KAAA,CAAAoC,GAAG,kB,iBAAU,GAAC,GAAAX,gBAAA,CAAGL,IAAA,CAAAC,SAAS,CAACC,EAAE,CAACC,UAAU,CAACK,MAAM,iB,GAC5ErC,mBAAA,CAAkG;IAA7FD,KAAK,EAAC,eAAe;IAACS,GAAG,EAAC,KAAK;IAAEsC,OAAK,EAAA1C,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAyC,OAAA,IAAAzC,QAAA,CAAAyC,OAAA,IAAA1C,IAAA,CAAO;wCACpDL,mBAAA,CAAqG;IAAhGD,KAAK,EAAC,eAAe;IAACS,GAAG,EAAC,MAAM;IAAEsC,OAAK,EAAA1C,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAA0C,QAAA,IAAA1C,QAAA,CAAA0C,QAAA,IAAA3C,IAAA,CAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}